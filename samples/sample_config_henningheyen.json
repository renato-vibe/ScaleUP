{
  "mode": "test",
  "ingestion": {
    "source": "file",
    "normalize": {
      "width": 960,
      "height": 960,
      "fps": 10
    },
    "buffer": {
      "max_ms": 800,
      "drop_policy": "drop_oldest",
      "max_frames": 30
    },
    "file": {
      "path": "/var/lib/scale-vision/samples/sample.ppm",
      "replay_mode": "realtime",
      "loop": true,
      "start_ms": 0,
      "duration_ms": 0,
      "allow_missing": true
    }
  },
  "inference": {
    "backend": "ultralytics",
    "model_path": "/var/lib/scale-vision/models/henningheyen/yolo_fruits_and_vegetables_v3.pt",
    "top_k": 5,
    "device": "cpu"
  },
  "decision": {
    "window_ms": 800,
    "min_confidence": 0.78,
    "min_margin": 0.1,
    "cooldown_ms": 2500,
    "require_stable_frames": 6,
    "scene_change_threshold": 0.4,
    "block_on_ingestion_degraded": true
  },
  "mapping": {
    "default_action": "block",
    "classes": {
      "almond": {
        "code_type": "plu",
        "code": "0000",
        "aliases": []
      },
      "apple": {
        "code_type": "plu",
        "code": "0001",
        "aliases": []
      },
      "apricot": {
        "code_type": "plu",
        "code": "0002",
        "aliases": []
      },
      "artichoke": {
        "code_type": "plu",
        "code": "0003",
        "aliases": []
      },
      "asparagus": {
        "code_type": "plu",
        "code": "0004",
        "aliases": []
      },
      "avocado": {
        "code_type": "plu",
        "code": "0005",
        "aliases": []
      },
      "banana": {
        "code_type": "plu",
        "code": "0006",
        "aliases": []
      },
      "bean curd/tofu": {
        "code_type": "plu",
        "code": "0007",
        "aliases": []
      },
      "bell pepper/capsicum": {
        "code_type": "plu",
        "code": "0008",
        "aliases": []
      },
      "blackberry": {
        "code_type": "plu",
        "code": "0009",
        "aliases": []
      },
      "blueberry": {
        "code_type": "plu",
        "code": "0010",
        "aliases": []
      },
      "broccoli": {
        "code_type": "plu",
        "code": "0011",
        "aliases": []
      },
      "brussels sprouts": {
        "code_type": "plu",
        "code": "0012",
        "aliases": []
      },
      "cantaloup/cantaloupe": {
        "code_type": "plu",
        "code": "0013",
        "aliases": []
      },
      "carrot": {
        "code_type": "plu",
        "code": "0014",
        "aliases": []
      },
      "cauliflower": {
        "code_type": "plu",
        "code": "0015",
        "aliases": []
      },
      "cayenne/cayenne spice/cayenne pepper/cayenne pepper spice/red pepper/red pepper": {
        "code_type": "plu",
        "code": "0016",
        "aliases": []
      },
      "celery": {
        "code_type": "plu",
        "code": "0017",
        "aliases": []
      },
      "cherry": {
        "code_type": "plu",
        "code": "0018",
        "aliases": []
      },
      "chickpea/garbanzo": {
        "code_type": "plu",
        "code": "0019",
        "aliases": []
      },
      "chili/chili vegetable/chili pepper/chili pepper vegetable/chilli/chilli vegetable/chilly/chilly": {
        "code_type": "plu",
        "code": "0020",
        "aliases": []
      },
      "clementine": {
        "code_type": "plu",
        "code": "0021",
        "aliases": []
      },
      "coconut/cocoanut": {
        "code_type": "plu",
        "code": "0022",
        "aliases": []
      },
      "edible corn/corn/maize": {
        "code_type": "plu",
        "code": "0023",
        "aliases": []
      },
      "cucumber/cuke": {
        "code_type": "plu",
        "code": "0024",
        "aliases": []
      },
      "date/date fruit": {
        "code_type": "plu",
        "code": "0025",
        "aliases": []
      },
      "eggplant/aubergine": {
        "code_type": "plu",
        "code": "0026",
        "aliases": []
      },
      "fig/fig fruit": {
        "code_type": "plu",
        "code": "0027",
        "aliases": []
      },
      "garlic/ail": {
        "code_type": "plu",
        "code": "0028",
        "aliases": []
      },
      "ginger/gingerroot": {
        "code_type": "plu",
        "code": "0029",
        "aliases": []
      },
      "Strawberry": {
        "code_type": "plu",
        "code": "0030",
        "aliases": []
      },
      "gourd": {
        "code_type": "plu",
        "code": "0031",
        "aliases": []
      },
      "grape": {
        "code_type": "plu",
        "code": "0032",
        "aliases": []
      },
      "green bean": {
        "code_type": "plu",
        "code": "0033",
        "aliases": []
      },
      "green onion/spring onion/scallion": {
        "code_type": "plu",
        "code": "0034",
        "aliases": []
      },
      "Tomato": {
        "code_type": "plu",
        "code": "0035",
        "aliases": []
      },
      "kiwi fruit": {
        "code_type": "plu",
        "code": "0036",
        "aliases": []
      },
      "lemon": {
        "code_type": "plu",
        "code": "0037",
        "aliases": []
      },
      "lettuce": {
        "code_type": "plu",
        "code": "0038",
        "aliases": []
      },
      "lime": {
        "code_type": "plu",
        "code": "0039",
        "aliases": []
      },
      "mandarin orange": {
        "code_type": "plu",
        "code": "0040",
        "aliases": []
      },
      "melon": {
        "code_type": "plu",
        "code": "0041",
        "aliases": []
      },
      "mushroom": {
        "code_type": "plu",
        "code": "0042",
        "aliases": []
      },
      "onion": {
        "code_type": "plu",
        "code": "0043",
        "aliases": []
      },
      "orange/orange fruit": {
        "code_type": "plu",
        "code": "0044",
        "aliases": []
      },
      "papaya": {
        "code_type": "plu",
        "code": "0045",
        "aliases": []
      },
      "pea/pea food": {
        "code_type": "plu",
        "code": "0046",
        "aliases": []
      },
      "peach": {
        "code_type": "plu",
        "code": "0047",
        "aliases": []
      },
      "pear": {
        "code_type": "plu",
        "code": "0048",
        "aliases": []
      },
      "persimmon": {
        "code_type": "plu",
        "code": "0049",
        "aliases": []
      },
      "pickle": {
        "code_type": "plu",
        "code": "0050",
        "aliases": []
      },
      "pineapple": {
        "code_type": "plu",
        "code": "0051",
        "aliases": []
      },
      "potato": {
        "code_type": "plu",
        "code": "0052",
        "aliases": []
      },
      "prune": {
        "code_type": "plu",
        "code": "0053",
        "aliases": []
      },
      "pumpkin": {
        "code_type": "plu",
        "code": "0054",
        "aliases": []
      },
      "radish/daikon": {
        "code_type": "plu",
        "code": "0055",
        "aliases": []
      },
      "raspberry": {
        "code_type": "plu",
        "code": "0056",
        "aliases": []
      },
      "strawberry": {
        "code_type": "plu",
        "code": "0057",
        "aliases": []
      },
      "sweet potato": {
        "code_type": "plu",
        "code": "0058",
        "aliases": []
      },
      "tomato": {
        "code_type": "plu",
        "code": "0059",
        "aliases": []
      },
      "turnip": {
        "code_type": "plu",
        "code": "0060",
        "aliases": []
      },
      "watermelon": {
        "code_type": "plu",
        "code": "0061",
        "aliases": []
      },
      "zucchini/courgette": {
        "code_type": "plu",
        "code": "0062",
        "aliases": []
      }
    }
  },
  "output": {
    "backend": "test",
    "suffix": "\n",
    "serial": {
      "device": "/dev/ttyUSB0",
      "baudrate": 9600,
      "parity": "none",
      "stopbits": 1,
      "terminator": "\r\n",
      "reconnect_ms": 1000
    }
  },
  "safety": {
    "kill_switch_file": "/etc/scale-vision/disable_output"
  },
  "http": {
    "enabled": true,
    "bind": "127.0.0.1",
    "port": 8081
  },
  "logging": {
    "level": "INFO",
    "log_dir": "/var/log/scale-vision",
    "json_log_file": "events.jsonl"
  }
}
